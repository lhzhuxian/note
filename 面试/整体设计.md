|                                    |                                                              |           |      |      |
| ---------------------------------- | ------------------------------------------------------------ | --------- | ---- | ---- |
| **Solr Cloud**                     | Search Engine used by GM and GR to serve user search and browse query request (Replacing Endeca) | YES       | YES  | NO   |
| **Search Service**                 | Spring Based application interacting with Solr Cloud         | YES       | YES  | NO   |
| **Assembler Orchestration V2**     | Spring based application which orchestrate between content and product results from Solr search | YES       | YES  | NO   |
| **ENDECA MDEX**                    | Legacy Oracle Search engine used to serve Search and Browse query request (Replaced by Solr Cloud) | YES (20%) | NO   | YES  |
| **Assembler Orchestration V1**     | Spring Based application which orchestrate between content and product results from Endeca Mdex search | NO        | NO   | NO   |
| **ATG Orchestration**              | ATG based orchestration to assembler content and search results from Endeca MDEX | YES       | NO   | YES  |
| **ENDECA XM (Experience Manager)** | ORACLE ENDECA Tool used by business team to configure home/department/family/line landing page content | YES       | YES  | YES  |
| **SEARCH GURU**                    | Tool used by business to boost and Bury products             | YES       | NO   | NO   |
| **REDIS DB**                       | DATA Store used to save data from Taxonomy, Search guru      | YES       | YES  | NO   |
| **ATG INDEXER APP**                | ATG Based catalog data retriever, back end job to feed data to Solr and Endeca index | YES       | YES  | YES  |
| **KAFKA**                          | Messaging system to hold index information temporarily while indexing. | YES       | YES  | NO   |
| Taxonomy-api                       |                                                              |           |      |      |



Pre-retrievel 

Category Classification

Customers are overwhelmed and confused by the large number of results that don't match their exact intent

Since our result is purely text relevancy, we will see many cases that customer try to search smartphone like iphone, the top result is not an iphone, but an iphone case. We want to tell which category matches their exact intent. We would like to boost smartphone category instead of smartphone accessory category. Increase the precision of our retrivel. 

We work together with our anlytics team. They will message the data from google analytics and stored in our cosmosDB database. Then we have the user signal data we need. Like user click, add to cart, convention data. For example, people search iPhone and click product1 100 times and add to cart 20 times, play the order 5 times. Then we can generate a query-cateogry dictionary and stored it into the Redis. Then we can use these category information to rephrease our solr query.

Why Redis

Redis is key-value store database that matches our need. Our dataset is not large. The most important reason is that redis is very fast. Redis is an in-memory database but persistent on disk database, hence it represents a different trade off where very high write and read speed is achieved with the limitation of data sets that can't be larger than the memory.

Chanllenging part

New products has no signal strength, which results in no customer traffic

1. Firstly identify new products 
2. Call p13nAPI to get similar products (Based on Text and Image Similarity)  
      Sample data: prod_dic = {“new_prod_1”: [“similiar_prod1", “similiar_prod2”, “similiar_prod3"], “new_prod_2”: [“similiar_prod1", “similiar_prod2”, “similiar_prod3"]} 
3. Get User Signal data for similar products and calculate score for new products. 
4. Map new products to search terms
5. Store map into redis 

Oracle DB -----------→ Kafka -------------→p13nAPI ---------------→ COSMOS DB (Save)-------------→ Redis (Map)



Brand Classification









Post-retrievel

Reranking

